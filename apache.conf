# === LABORATORIOS CRUB APPLICATION ===
WSGIDaemonProcess laboratorios_crub_app python-home=/var/www/laboratorios-crub/venv python-path=/var/www/laboratorios-crub

<Location /laboratorios-crub>
    WSGIProcessGroup laboratorios_crub_app
    WSGIApplicationGroup %{GLOBAL}
</Location>

WSGIScriptAlias /laboratorios-crub /var/www/laboratorios-crub/wsgi.py

<Directory /var/www/laboratorios-crub>
    <Files wsgi.py>
        Require all granted
    </Files>
    Require all granted
    Options FollowSymLinks
</Directory>

# Static files
Alias /laboratorios-crub/static /var/www/laboratorios-crub/app/static
<Directory /var/www/laboratorios-crub/app/static>
    Require all granted
    Options -Indexes
    # Enable caching for static assets
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/ico "access plus 1 month"
</Directory>

# Protect sensitive directories
<Directory /var/www/laboratorios-crub/instance>
    Require all denied
</Directory>

<Directory /var/www/laboratorios-crub/logs>
    Require all denied
</Directory>

<Directory /var/www/laboratorios-crub/migrations>
    Require all denied
</Directory>

<Directory /var/www/laboratorios-crub/__pycache__>
    Require all denied
</Directory>

# Security headers
<Directory /var/www/laboratorios-crub>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</Directory>
